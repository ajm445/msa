# MSA 아키텍처 분리 AI 분석 서비스 - 프로젝트 계획서

## 문서 정보

| 항목 | 내용 |
|------|------|
| 문서명 | MSA Analyzer 프로젝트 계획서 |
| 버전 | 1.0 |
| 작성일 | 2026-01-07 |
| 프로젝트명 | MSA 아키텍처 분리 AI 분석 서비스 (MSA Analyzer) |

---

## 1. 프로젝트 개요

### 1.1 프로젝트 소개

**MSA Analyzer**는 사용자가 제공한 코드베이스 또는 프로젝트 설명을 AI가 분석하여, 최적의 MSA(Microservice Architecture) 서비스 분리 방안을 제안하는 웹 서비스입니다.

### 1.2 프로젝트 배경

모놀리식 아키텍처에서 MSA로의 전환은 많은 기업들이 직면하는 과제입니다. 그러나 적절한 서비스 분리 기준을 정하는 것은 전문 지식과 경험이 필요한 어려운 작업입니다. 본 프로젝트는 AI를 활용하여 이러한 분석 과정을 자동화하고, 개발자들에게 MSA 설계 가이드를 제공합니다.

### 1.3 프로젝트 목표

| 목표 | 설명 |
|------|------|
| **자동화된 분석** | 코드 또는 텍스트 입력을 통한 자동 MSA 구조 분석 |
| **시각적 제안** | 서비스 분리 제안을 다이어그램과 표로 시각화 |
| **전문 지식 제공** | RAG 기반으로 MSA 모범 사례 및 가이드 참조 |
| **접근성 향상** | 개발 경험이 적은 사용자도 쉽게 사용 가능 |

---

## 2. 프로젝트 범위 (MVP)

### 2.1 MVP 기능 범위

| 기능 | 포함 여부 | 설명 |
|------|----------|------|
| 코드/폴더 업로드 분석 | ✅ | .zip 파일 업로드 후 MSA 분석 |
| 텍스트 설명 분석 | ✅ | 자연어로 프로젝트 설명 입력 |
| RAG 기반 분석 | ✅ | MSA 가이드 문서 참조하여 분석 |
| MSA 구조 다이어그램 | ✅ | 서비스 간 관계 시각화 |
| 서비스 분리 제안표 | ✅ | 서비스별 책임, 통신 방식 제안 |
| 분석 결과 저장 | ✅ | 분석 결과 DB 저장 |
| 분석 히스토리 조회 | ❌ | 추후 개발 예정 |
| 사용자 인증 | ❌ | 추후 개발 예정 |

### 2.2 지원 언어/프레임워크

| 구분 | 지원 범위 | 분석 내용 |
|------|----------|----------|
| **백엔드** | Java/Spring | 서비스 분리, API 경계, DB 분리 |
| **백엔드** | Node.js/Express | 서비스 분리, API 경계, DB 분리 |
| **프론트엔드** | React | 컴포넌트 구조 분석, 모노레포 분리 |

### 2.3 산출물

1. **MSA 구조 다이어그램**: 서비스 간 관계 시각화
2. **서비스 분리 제안표**: 서비스명, 책임, 엔드포인트, DB 제안
3. **통신 방식 권고**: REST, Event, gRPC 등 권장 방식
4. **권고사항**: 주의점, 트레이드오프, 개선 제안

---

## 3. 기술 스택

### 3.1 기술 스택 요약

```
┌─────────────────────────────────────────────────────────────┐
│                     기술 스택 구성                           │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  프론트엔드          백엔드              AI/ML              │
│  ┌─────────┐        ┌─────────┐        ┌─────────┐        │
│  │ React   │        │ Node.js │        │ Claude  │        │
│  │         │───────▶│ Express │───────▶│ API     │        │
│  └─────────┘        └─────────┘        └─────────┘        │
│                           │                                 │
│                           │                                 │
│                           ▼                                 │
│                    ┌─────────────┐     ┌─────────────┐     │
│                    │  Supabase   │     │  Voyage AI  │     │
│                    │ PostgreSQL  │     │ (임베딩)     │     │
│                    │ + pgvector  │     └─────────────┘     │
│                    └─────────────┘                         │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 3.2 상세 기술 스택

| 구분 | 기술 | 버전/상세 | 선택 이유 |
|------|------|----------|----------|
| **프론트엔드** | React | 18.x | 컴포넌트 기반 UI, 풍부한 생태계 |
| **백엔드** | Node.js | 20.x LTS | JavaScript 통일, 비동기 처리 |
| **백엔드 프레임워크** | Express.js | 4.x | 경량, 유연한 라우팅 |
| **LLM** | Claude API | claude-3-opus | 코드 분석 능력, 한국어 지원 |
| **임베딩** | Voyage AI | voyage-code-3 | 코드 분석 특화 임베딩 모델 |
| **데이터베이스** | Supabase | PostgreSQL 15 | 관리형 DB, 실시간 기능 |
| **벡터 DB** | pgvector | - | RAG용 벡터 유사도 검색 |
| **다이어그램** | React Flow | - | React 친화적, 인터랙티브 |

---

## 4. 시스템 아키텍처

### 4.1 전체 아키텍처

```
┌─────────────────────────────────────────────────────────────┐
│                       클라이언트 (React)                     │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  메인 페이지    │    분석 결과 페이지                  │   │
│  │  - 코드 업로드  │    - 다이어그램                     │   │
│  │  - 텍스트 입력  │    - 서비스 제안표                  │   │
│  └─────────────────────────────────────────────────────┘   │
└─────────────────────────┬───────────────────────────────────┘
                          │ HTTP/REST
                          ▼
┌─────────────────────────────────────────────────────────────┐
│                    백엔드 서버 (Node.js + Express)           │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────────┐    │
│  │ 코드 파싱   │  │  분석 엔진   │  │  RAG 파이프라인  │    │
│  │ 모듈        │  │             │  │                 │    │
│  └──────┬──────┘  └──────┬──────┘  └────────┬────────┘    │
│         │                │                   │             │
└─────────┼────────────────┼───────────────────┼─────────────┘
          │                │                   │
          │                ▼                   ▼
          │         ┌─────────────┐     ┌─────────────┐
          │         │ Claude API  │     │ Voyage AI   │
          │         │ (분석/생성) │     │ (임베딩)    │
          │         └─────────────┘     └──────┬──────┘
          │                                    │
          ▼                                    ▼
┌─────────────────────────────────────────────────────────────┐
│                        Supabase                              │
│  ┌─────────────────────────────────────────────────────┐   │
│  │                    PostgreSQL                        │   │
│  │  ┌───────────┐  ┌───────────┐  ┌───────────────┐   │   │
│  │  │ analyses  │  │ documents │  │ chunks        │   │   │
│  │  │ (분석결과)│  │ (RAG문서) │  │ (벡터임베딩)  │   │   │
│  │  └───────────┘  └───────────┘  └───────────────┘   │   │
│  └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
```

### 4.2 분석 프로세스 흐름

```
사용자 입력 (코드/텍스트)
        │
        ▼
┌───────────────────┐
│ 1단계: 입력 처리   │
│ - 코드 파싱       │
│ - 구조 분석       │
└─────────┬─────────┘
          │
          ▼
┌───────────────────┐
│ 2단계: 1차 분석   │ ───────▶ Claude API
│ - MSA 문서 초안   │         (코드 분석)
└─────────┬─────────┘
          │
          ▼
┌───────────────────┐
│ 3단계: RAG 분석   │ ───────▶ Voyage AI (임베딩)
│ - MSA 가이드 참조 │         pgvector (검색)
│ - 2차 보강       │
└─────────┬─────────┘
          │
          ▼
┌───────────────────┐
│ 4단계: 결과 생성  │
│ - 다이어그램 생성 │
│ - 제안표 생성    │
│ - 권고사항 도출  │
└─────────┬─────────┘
          │
          ▼
    분석 결과 출력
```

---

## 5. 기능 요구사항

### 5.1 사용자 기능

| ID | 기능명 | 설명 | 우선순위 |
|----|--------|------|----------|
| F-001 | 코드 업로드 | .zip 파일로 프로젝트 업로드 (최대 50MB) | 높음 |
| F-002 | 언어 선택 | Java/Spring, Node.js/Express, React 중 선택 | 높음 |
| F-003 | 텍스트 설명 입력 | 프로젝트를 자연어로 설명 (최소 50자) | 높음 |
| F-004 | 분석 시작 | 입력 데이터 기반 MSA 분석 수행 | 높음 |
| F-005 | 결과 조회 | 분석 결과 (다이어그램, 제안표) 확인 | 높음 |
| F-006 | 결과 저장 | 분석 결과를 DB에 저장 | 중간 |
| F-007 | 결과 삭제 | 저장된 분석 결과 삭제 | 낮음 |

### 5.2 시스템 기능

| ID | 기능명 | 설명 | 우선순위 |
|----|--------|------|----------|
| S-001 | 코드 파싱 | 업로드된 코드의 구조 분석 | 높음 |
| S-002 | AI 분석 | Claude API를 통한 MSA 분석 | 높음 |
| S-003 | RAG 검색 | MSA 가이드 문서에서 관련 정보 검색 | 높음 |
| S-004 | 다이어그램 생성 | 분석 결과를 시각화 데이터로 변환 | 높음 |
| S-005 | 헬스체크 | 서버 및 외부 서비스 상태 확인 | 중간 |

---

## 6. 데이터베이스 설계

### 6.1 테이블 구조

```
┌─────────────────────────────────────────────────────────────┐
│                         ERD 요약                             │
└─────────────────────────────────────────────────────────────┘

┌─────────────────┐         ┌─────────────────────────┐
│    analyses     │         │ analysis_recommendations │
├─────────────────┤         ├─────────────────────────┤
│ PK id           │ 1     N │ PK id                   │
│    status       │─────────│ FK analysis_id          │
│    input_type   │         │    recommendation_type  │
│    diagram_data │         │    message              │
│    created_at   │         │    suggestion           │
└────────┬────────┘         └─────────────────────────┘
         │
         │ 1
         │
         │ N
┌────────┴────────┐
│analysis_services│
├─────────────────┤
│ PK id           │
│ FK analysis_id  │
│    service_name │
│    responsibility│
│    service_type │
│    endpoints    │
│    database_name│
│    dependencies │
└─────────────────┘


┌─────────────────┐         ┌─────────────────┐
│    documents    │         │     chunks      │
├─────────────────┤         ├─────────────────┤
│ PK id           │ 1     N │ PK id           │
│    name         │─────────│ FK document_id  │
│    version      │         │    section      │
│    status       │         │    content      │
│    created_at   │         │    embedding    │ ← VECTOR(1024)
└─────────────────┘         │    tags         │
                            └─────────────────┘
```

### 6.2 주요 테이블 설명

| 테이블명 | 용도 | 주요 컬럼 |
|----------|------|----------|
| **analyses** | 분석 결과 저장 | id, status, input_type, diagram_data |
| **analysis_services** | 제안된 서비스 정보 | service_name, responsibility, type |
| **analysis_recommendations** | 권고사항 | type, message, suggestion |
| **documents** | RAG 원본 문서 | name, version, status |
| **chunks** | 임베딩된 청크 | content, embedding(벡터), tags |

---

## 7. API 설계

### 7.1 API 엔드포인트 목록

| Method | Endpoint | 설명 | 요청 형식 |
|--------|----------|------|----------|
| POST | `/api/analysis/code` | 코드 업로드 분석 | multipart/form-data |
| POST | `/api/analysis/text` | 텍스트 설명 분석 | application/json |
| GET | `/api/analysis/:id` | 분석 결과 조회 | - |
| DELETE | `/api/analysis/:id` | 분석 결과 삭제 | - |
| POST | `/api/rag/search` | MSA 가이드 검색 | application/json |
| GET | `/api/health` | 서버 상태 확인 | - |

### 7.2 응답 형식

**성공 응답**
```json
{
  "success": true,
  "data": { ... },
  "message": "요청이 성공적으로 처리되었습니다."
}
```

**에러 응답**
```json
{
  "success": false,
  "error": {
    "code": "ERROR_CODE",
    "message": "에러 메시지"
  }
}
```

### 7.3 제한사항

| 항목 | 제한 |
|------|------|
| 최대 파일 크기 | 50MB |
| 지원 형식 | .zip |
| 분석 API Rate Limit | 10회/분 |
| RAG 검색 Rate Limit | 30회/분 |

---

## 8. 화면 설계

### 8.1 페이지 구성

| 페이지 | 경로 | 설명 |
|--------|------|------|
| 메인 (분석 입력) | `/` | 코드 업로드 또는 텍스트 입력 |
| 분석 결과 | `/analysis/:id` | 분석 결과 상세 보기 |

### 8.2 메인 페이지 구성요소

```
┌─────────────────────────────────────────────────────────────┐
│  [헤더] MSA Analyzer                           [분석하기]   │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│              MSA 아키텍처 분석 서비스                        │
│                                                             │
│     ┌─────────────────┬─────────────────┐                  │
│     │   코드 업로드    │   텍스트 설명    │ ← 탭 선택       │
│     └─────────────────┴─────────────────┘                  │
│                                                             │
│     ┌─────────────────────────────────────┐                │
│     │                                     │                │
│     │  [언어 선택] [파일 업로드/텍스트 입력] │                │
│     │                                     │                │
│     └─────────────────────────────────────┘                │
│                                                             │
│                    [ 분석 시작 ]                            │
│                                                             │
├─────────────────────────────────────────────────────────────┤
│  [푸터] © 2026 MSA Analyzer                                 │
└─────────────────────────────────────────────────────────────┘
```

### 8.3 분석 결과 페이지 구성요소

1. **프로젝트 요약**: 도메인, 감지된 기능, 분석 정보
2. **서비스 분리 제안표**: 서비스명, 책임, 유형, DB
3. **MSA 구조 다이어그램**: React Flow로 시각화
4. **서비스 상세 정보**: 아코디언 형태의 상세 정보
5. **권고사항**: 정보, 경고 형태의 제안
6. **통신 방식 제안표**: 서비스 간 통신 방식

---

## 9. 개발 단계

### 9.1 개발 로드맵

```
┌─────────────────────────────────────────────────────────────┐
│                        개발 단계                             │
└─────────────────────────────────────────────────────────────┘

Phase 1: 환경 구축 및 기초 작업
├── Supabase 프로젝트 생성 및 DB 스키마 구축
├── Node.js/Express 백엔드 프로젝트 세팅
├── React 프론트엔드 프로젝트 세팅
└── 개발 환경 설정 (ESLint, Prettier 등)

Phase 2: RAG 파이프라인 구축
├── MSA 가이드 문서 수집 및 정리
├── 청킹 모듈 개발 (청킹_전략_정의서 기반)
├── Voyage AI 임베딩 연동
└── pgvector 벡터 검색 구현

Phase 3: 코드 파싱 모듈 개발
├── .zip 파일 업로드 처리
├── Java/Spring 프로젝트 파싱
├── Node.js/Express 프로젝트 파싱
└── React 프로젝트 파싱

Phase 4: AI 분석 엔진 개발
├── Claude API 연동
├── 1차 분석 프롬프트 설계
├── RAG 기반 2차 분석 구현
└── 분석 결과 구조화

Phase 5: 백엔드 API 서버 구축
├── 분석 API 개발 (POST /api/analysis/code, /text)
├── 조회/삭제 API 개발
├── RAG 검색 API 개발
└── 에러 처리 및 Rate Limiting

Phase 6: 프론트엔드 개발
├── 메인 페이지 (입력 폼, 파일 업로드)
├── 분석 결과 페이지 (표, 다이어그램)
├── React Flow 다이어그램 구현
└── 로딩/에러 상태 처리

Phase 7: 테스트 및 개선
├── 단위 테스트 작성
├── 통합 테스트
├── 사용자 테스트 및 피드백
└── 성능 최적화
```

### 9.2 단계별 상세

| 단계 | 내용 | 주요 산출물 |
|------|------|------------|
| **Phase 1** | 환경 구축 | DB 스키마, 프로젝트 구조 |
| **Phase 2** | RAG 파이프라인 | 청킹 모듈, 임베딩 데이터 |
| **Phase 3** | 코드 파싱 | 파싱 모듈, 구조 분석 로직 |
| **Phase 4** | AI 분석 | 분석 엔진, 프롬프트 |
| **Phase 5** | 백엔드 | REST API 서버 |
| **Phase 6** | 프론트엔드 | React 웹 애플리케이션 |
| **Phase 7** | 테스트 | 테스트 코드, 배포 |

---

## 10. 산출물 목록

### 10.1 문서 산출물

| 문서명 | 상태 | 설명 |
|--------|------|------|
| MSA_정의서.md | ✅ 완료 | MSA 개념, 분리 기준 정의 |
| MSA_Analyzer_설계문서.md | ✅ 완료 | 시스템 설계 문서 |
| API_명세서.md | ✅ 완료 | REST API 상세 명세 |
| DB_스키마_상세.md | ✅ 완료 | 데이터베이스 설계 |
| 청킹_전략_정의서.md | ✅ 완료 | RAG 청킹 규칙 |
| 화면_설계서.md | ✅ 완료 | UI/UX 설계 |
| 프로젝트_계획서.md | ✅ 완료 | 본 문서 |

### 10.2 개발 산출물

| 산출물 | 상태 | 설명 |
|--------|------|------|
| 백엔드 서버 | 예정 | Node.js + Express API 서버 |
| 프론트엔드 | 예정 | React 웹 애플리케이션 |
| 코드 파싱 모듈 | 예정 | 언어별 코드 분석기 |
| RAG 파이프라인 | 예정 | 임베딩, 검색 시스템 |
| 테스트 코드 | 예정 | 단위/통합 테스트 |

---

## 11. 리스크 및 대응방안

### 11.1 기술적 리스크

| 리스크 | 영향도 | 발생 가능성 | 대응방안 |
|--------|--------|------------|----------|
| Claude API 응답 지연 | 높음 | 중간 | 타임아웃 설정, 비동기 처리, 캐싱 |
| 대용량 파일 처리 실패 | 중간 | 중간 | 파일 크기 제한, 스트리밍 처리 |
| RAG 검색 정확도 저하 | 중간 | 낮음 | 청킹 전략 개선, 프롬프트 튜닝 |
| DB 성능 이슈 | 중간 | 낮음 | 인덱스 최적화, 쿼리 튜닝 |

### 11.2 운영 리스크

| 리스크 | 영향도 | 발생 가능성 | 대응방안 |
|--------|--------|------------|----------|
| API 비용 초과 | 중간 | 중간 | Rate Limiting, 사용량 모니터링 |
| 서비스 장애 | 높음 | 낮음 | 헬스체크, 에러 로깅, 알림 설정 |

---

## 12. 향후 계획

### 12.1 MVP 이후 확장 기능

| 기능 | 설명 | 우선순위 |
|------|------|----------|
| 분석 히스토리 | 과거 분석 결과 목록 조회 | 높음 |
| 사용자 인증 | 로그인/회원가입 기능 | 높음 |
| 추가 언어 지원 | Python/Django, Go 등 | 중간 |
| 분석 결과 내보내기 | PDF, Markdown 다운로드 | 중간 |
| 팀 협업 기능 | 분석 결과 공유, 댓글 | 낮음 |
| CI/CD 연동 | GitHub 연동 자동 분석 | 낮음 |

### 12.2 기술 고도화

- 분석 정확도 향상을 위한 프롬프트 엔지니어링
- 추가 MSA 가이드 문서 확보
- 실제 MSA 전환 사례 데이터 수집
- 사용자 피드백 기반 분석 모델 개선

---

## 13. 참고 문서

| 문서 | 경로 |
|------|------|
| MSA 정의서 | `docs/MSA_정의서.md` |
| MSA Analyzer 설계문서 | `docs/MSA_Analyzer_설계문서.md` |
| API 명세서 | `docs/API_명세서.md` |
| DB 스키마 상세 | `docs/DB_스키마_상세.md` |
| 청킹 전략 정의서 | `docs/청킹_전략_정의서.md` |
| 화면 설계서 | `docs/화면_설계서.md` |

---

## 변경 이력

| 버전 | 날짜 | 변경 내용 | 작성자 |
|------|------|----------|--------|
| 1.0 | 2026-01-07 | 최초 작성 | - |
